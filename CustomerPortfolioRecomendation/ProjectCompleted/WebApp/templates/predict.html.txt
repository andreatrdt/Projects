<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prediction Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffffff;
      color: #003366;
      padding: 2rem;
      width: 80%;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #004080;
      margin-bottom: 1rem;
    }

    /* Navigation menu */
    .nav-menu {
      background-color: #004080;
      padding: 1rem;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 2rem;
    }

    .nav-menu a {
      color: white;
      font-size: 1.2rem;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
    }

    .nav-menu a:hover {
      background-color: #003366;
    }

    /* Intro paragraph */
    .intro-text {
      margin-top: 1rem;
      margin-bottom: 2rem;
      font-size: 1rem;
      color: #003366;
      line-height: 1.5;
      text-align: left;
      padding: 0 1rem;
    }


    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
      margin-bottom: 0.3rem;
    }
    select, input[type="number"], input[type="range"] {
      width: 100%;
      padding: 0.4rem;
      border-radius: 4px;
      border: 1px solid #99c2ff;
      box-sizing: border-box;
    }
    .range-value {
      font-weight: normal;
      font-size: 0.9rem;
      color: #0059b3;
      text-align: right;
    }
    .radio-group {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }
    .radio-group label {
      font-weight: normal;
    }
    input[type="submit"] {
      margin-top: 2rem;
      width: 100%;
      background-color: #0059b3;
      color: white;
      font-weight: bold;
      border: none;
      padding: 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }
    input[type="submit"]:hover {
      background-color: #003d80;
    }
    .result {
      margin-top: 2rem;
      padding: 1rem;
      border: 2px solid #0059b3;
      border-radius: 6px;
      background-color: #cce0ff;
      color: #003366;
    }
    .error {
      color: red;
      margin-top: 1rem;
      font-weight: bold;
    }
    /* Layout for portfolio images */
    .portfolio-container {
      margin-top: 2rem;
      padding-top: 2rem;
    }

    .portfolio-item {
      margin-bottom: 1.5rem;
      border: 1px solid #99c2ff;
      padding: 1rem;
      border-radius: 6px;
      background-color: #f7f7f7;
    }

    .portfolio-item img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .portfolio-item h3 {
      font-size: 1.2rem;
      margin-top: 1rem;
      color: #003366;
    }

    .portfolio-item p {
      margin-top: 0.5rem;
      color: #003366;
    }
  </style>
</head>
<body>

    <!-- Navigation Menu -->
  <div class="nav-menu">
    <a href="/">Home</a>
    <a href="/team">Team</a>
    <a href="/predict">Prediction</a>
  </div>


  <h1>Enter Client Data</h1>

  <!-- Introduction Text (added) -->
  <div class="intro-text">
    <p>
      This brief questionnaire helps us determine which investment products best match your individual profile, based on the information you provide.
      All responses are <strong>completely anonymous</strong> - we do not collect or store any personal data.
      Once you complete the form, our model will suggest the most suitable portfolios according to your risk appetite and financial goals.
    </p>
  </div>

  {% if error %}
    <div class="error">Error: {{ error }}</div>
  {% endif %}

  <form method="post" id="predict-form">

    <label for="Age">Age</label>
    <select name="Age" id="Age" required>
      <option value="">-- Select Age --</option>
      {% for a in range(18, 100) %}
        <option value="{{a}}" {% if input_data and input_data.Age|int == a %}selected{% endif %}>{{a}}</option>
      {% endfor %}
    </select>

    <label for="Gender">Gender</label>
    <div class="radio-group">
      <label><input type="radio" name="Gender" value="0" {% if input_data and input_data.Gender == '0' %}checked{% endif %}> Female</label>
      <label><input type="radio" name="Gender" value="1" {% if input_data and input_data.Gender == '1' %}checked{% endif %}> Male</label>
    </div>

    <label for="RiskPropensity">Risk Propensity <span id="riskVal" class="range-value"></span></label>
    <input type="range" id="RiskPropensity" name="RiskPropensity" min="0" max="1" step="0.01" value="{{ input_data.RiskPropensity if input_data else '0.5' }}">

    <label for="FinancialEducation">Financial Education <span id="finEduVal" class="range-value"></span></label>
    <input type="range" id="FinancialEducation" name="FinancialEducation" min="0" max="1" step="0.01" value="{{ input_data.FinancialEducation if input_data else '0.5' }}">

    <label for="Income">Income (k€/year)</label>
    <input type="number" id="Income" name="Income" min="0" step="0.1" value="{{ input_data.Income if input_data else '' }}" required>

    <label for="Wealth">Wealth (k€)</label>
    <input type="number" id="Wealth" name="Wealth" min="0" step="0.1" value="{{ input_data.Wealth if input_data else '' }}" required>

    <label for="FamilyMembers">Family Members</label>
    <input type="number" id="FamilyMembers" name="FamilyMembers" min="1" max="20" step="1" value="{{ input_data.FamilyMembers if input_data else '1' }}" required>

    <input type="submit" value="Predict">
  </form>

  {% if prediction_acc is defined %}


  <!-- Show intro message before the portfolio suggestions -->
    <div class="intro-message">
      <p>Thank you for entering your information, we’re ready to discover what kind of investor you are and recommend the products that best fit your profile!</p>
      <p>Our model’s first step is to understand which investment approach suits you best: Accumulation or Income?</p>
      <p>Before we decide, here’s what each approach means:</p>
      <ul>
        <li><strong>Income: Go Big or Go Home</strong> - Best for investors with substantial capital to deploy or high earners who can cushion any timing risk with future sizable investments. It also suits those who want a significant lump sum working for them while generating a passive income through coupon payments.</li>
        <li><strong>Accumulation: Brick-by-Brick Dream Builder</strong> - Ideal for small and medium-sized investors who prefer to build their portfolio gradually by setting aside money month after month. Passive products such as ETFs are usually recommended here because they are highly efficient (low fees). Contributing smaller amounts regularly helps reduce market timing risk, perfect for building a nest egg and reaching retirement on solid footing!</li>
      </ul>
    </div>


    <div class="result">
        <p>{{ message }}</p>
        <p>{{message2}}</p>
    </div>

    <h2>Recommended Portfolios</h2>
    <div class="portfolio-container">
      {% for name, risk in top_portfolios %}
        <div class="portfolio-item">
          {% if name == 'ETF_bond' %}
                <h3>ETF Bond Aggregate Portfolio (Risk: 1/7, Type: Accumulation/Income)</h3>
          {% elif name == 'ETF_equity' %}
                <h3>ETF Equity Portfolio (Risk: 3/7, Type: Accumulation/Income)</h3>
          {% elif name == 'ETF_life' %}
                <h3>ETF Life Strategy 80/20 (Risk: 2/7, Type: Accumulation)</h3>
          {% elif name == 'active_bond' %}
                <h3>Alternative Bond Portfolio (Risk: 2/7, Type: Income)</h3>
          {% elif name == 'active_equity' %}
                <h3>Alternative Equity Portfolio (Risk: 4/7, Type: Income)</h3>
          {% elif name == 'active_life' %}
                <h3>Alternative Life Strategy Portfolio 80/20 (Risk: 3/7, Type: Accumulation)</h3>
          {% else %}
                <h3>{{ name }} (Risk: {{ risk }})</h3>
          {% endif %}
          <img src="{{ url_for('static', filename=portfolio_images[name]) }}" alt="{{ name }}">
          {% if name == 'ETF_bond' %}
                <p>This portfolio provides exposure to the global bond market by tracking the Bloomberg Global Aggregate
                Bond Index (ticker: LEGATRUU). The index represents a wide range of investment-grade bonds from around
                the world, including government and corporate bonds across various countries and currencies. The portfolio
                is highly diversified in fixed income and is designed to provide steady income and preserve capital with lower
                volatility. It follows a passive strategy that aims to match the index’s performance (low tracking error)
                rather than trying to outperform it. It uses synthetic replication, meaning it relies on financial derivatives
                to mirror the bond index returns without purchasing every bond in the index. The Total Expense Ratio
                (TER) is 0.13% per year. With its conservative profile, a medium-term investment horizon is suggested for
                this portfolio.<p>
                <p>Suitable for investors who prioritize capital preservation and stable income with minimal risk.<p>
          {% elif name == 'ETF_equity' %}
                <p>This portfolio tracks the MSCI ACWI Index (MXWO), a broad global stock market index that includes
                companies across developed markets. It offers high diversification by investing in thousands of stocks world-
                wide, providing investors exposure to many countries and industries for potential growth. The fund follows a
                passive strategy, aiming to closely match the index performance with minimal deviation (low tracking error)
                rather than trying to outperform it. It uses synthetic replication, meaning the portfolio employs financial
                contracts (such as futures) to mirror the returns of the MSCI ACWI without holding all the underlying
                stocks directly. The Total Expense Ratio (TER) is fixed at 0.12% per year. Given the volatility of equities,
                a long-term investment horizon is recommended to weather market ups and downs.<p>
                <p>Suitable for investors who want broad global stock market exposure and can tolerate moderate risk for
                long-term growth.<p>
          {% elif name == 'ETF_life' %}
                <p>This portfolio offers a balanced mix of stocks and bonds by allocating 80% to global equities and 20% to global
                fixed income. In practice, it tracks a combined benchmark of 80% MSCI ACWI (global stock index) and
                20% Bloomberg Global Aggregate (global bond index). The high equity portion provides growth potential,
                while the bond portion adds stability and reduces overall volatility. The strategy is passive, aiming to match
                the performance of this 80/20 blended index with minimal deviation. It uses synthetic replication to achieve
                exposure to both components: the fund uses futures and similar instruments to mirror the returns of the
                equity and bond indices without holding all underlying assets directly. The Total Expense Ratio (TER) is
                fixed at 0.15% per year. Investors should have a medium to long-term horizon to benefit from the growth
                potential of this balanced portfolio while riding out short-term market fluctuations.<p>
                <p>Suitable for investors who want a one-stop portfolio combining growth and stability, with moderate risk.<p>
          {% elif name == 'active_bond' %}
                <p>Alternative Bond offers global fixed-income exposure with active management to enhance returns or manage
                risk. Instead of strictly following a benchmark, the portfolio can shift its mix of government and corporate
                bonds to seize opportunities or guard against changing market conditions. It uses synthetic replication to
                mirror the bond market index, while active tweaks aim to boost yield or lessen volatility. The objective
                is active: rather than just tracking an index, it strives to beat it or avoid losses when bond markets are
                under pressure. This strategy may incur a slightly higher TER of 1% due to the hands-on management.
                Risk remains relatively low (mostly high-quality bonds), but the portfolio can take on a bit more risk than
                a passive bond fund in pursuit of higher returns.<p>
                <p>Suitable for investors seeking steady income with a potential performance edge, who are comfortable with
                an active bond approach for the medium term.<p>
          {% elif name == 'active_equity' %}
                <p>Alternative Equity invests in global stocks with an active strategy aimed at boosting returns or reducing
                downside risk. This is an actively managed equity portfolio investing globally, with the MSCI ACWI Index
                (MXWO) serving as its benchmark.Unlike a passive index fund, this portfolio can make tactical adjustments
                to try to outperform the market or limit losses in downturns. It still uses synthetic replication for core index
                exposure, but adds active tweaks for a smoother ride. The objective is active: rather than just track an
                index, it aims for better risk-adjusted returns (e.g. smaller losses in down markets). This strategy comes
                with a slightly higher TER of 1.2% due to the added management. Because active equity investing can lead
                to higher volatility, a long-term investment horizon is recommended to allow the strategy to play out and to
                weather short-term market swings.<p>
                <p>Suitable for investors who seek to beat the global equity market and are willing to accept higher risk through
                active management and have a long-term view.<p>
          {% elif name == 'active_life' %}
                <p>Alternative LifeStrategy 80/20 is a balanced portfolio (80% stocks, 20% bonds) managed dynamically instead
                of following a fixed allocation. It remains globally diversified but actively manages stress market conditions.
                Using synthetic replication for core exposures, the manager can tactically shift the balance to seize opportu-
                nities or reduce risk. The goal is to improve the risk-return profile over a static 80/20, for example, trimming
                stocks in a downturn or increasing them in a rally. This flexibility comes with a slightly higher TER of 1.5%
                due to active oversight. With its moderated risk level and active oversight, a long-term investment perspec-
                tive is recommended so that the portfolio’s adjustments have time to add value and weather different market
                conditions.<p>
                <p>Suitable for investors who want a balanced long-term plan with tactical risk management and are willing to
                pay a bit more for potential downside protection.<p>
          {% else %}
                <p>{{ name }} (Risk: {{ risk }})<p>
          {% endif %}
        </div>
      {% endfor %}
    </div>

  {% endif %}


  <script>
    // Update slider values dynamically
    const riskSlider = document.getElementById('RiskPropensity');
    const riskVal = document.getElementById('riskVal');
    const finEduSlider = document.getElementById('FinancialEducation');
    const finEduVal = document.getElementById('finEduVal');

    function updateSliderValue(slider, display) {
      display.textContent = slider.value;
    }

    riskSlider.addEventListener('input', () => updateSliderValue(riskSlider, riskVal));
    finEduSlider.addEventListener('input', () => updateSliderValue(finEduSlider, finEduVal));

    // Initialize display values on page load
    updateSliderValue(riskSlider, riskVal);
    updateSliderValue(finEduSlider, finEduVal);
  </script>

</body>
</html>
